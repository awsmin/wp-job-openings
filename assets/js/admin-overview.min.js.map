{"version":3,"sources":["overview.js"],"names":["jQuery","document","ready","$","awsmJobsOverview","window","chartAreaPlugin","postboxes","add_postbox_toggles","awsmJobsAdminOverview","screen_id","id","beforeDraw","chart","args","options","chartArea","primaryBgColor","primaryColor","secondaryColor","secondaryBgColor","ctx","height","bottom","top","divisions","scales","y","ticks","length","factor","save","fillStyle","rectY","fillRect","left","right","restore","data","labels","analytics_data","datasets","label","i18n","chart_label","fill","borderColor","backgroundColor","pointBackgroundColor","pointHoverBackgroundColor","pointHoverBorderColor","borderWidth","pointBorderWidth","pointRadius","pointHoverRadius","tension","pointHitRadius","x","grid","drawOnChartArea","tickWidth","display","drawBorder","font","weight","tickLength","color","borderDash","precision","stepSize","elements","line","point","radius","layout","padding","plugins","legend","analyticsChart","option","renderAnalyticsChart","reRender","chartData","destroy","Chart","type","reset","update","on","e","ui","item","attr"],"mappings":"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","file":"admin-overview.min.js","sourcesContent":["/* global awsmJobsAdminOverview, postboxes, Chart */\n\n'use strict';\n\njQuery(document).ready(function($) {\n\tvar awsmJobsOverview = window.awsmJobsOverview = window.awsmJobsOverview || {};\n\n\t/*================ Meta-boxes ================*/\n\n\t// Activate toggle state.\n\tpostboxes.add_postbox_toggles(awsmJobsAdminOverview.screen_id);\n\n\t/*================ Charts ================*/\n\n\tvar chartAreaPlugin = {\n\t\tid: 'chartAreaCustomizer',\n\t\tbeforeDraw: function(chart, args, options) {\n\t\t\tif (options.chartArea && options.chartArea.primaryBgColor) {\n\t\t\t\tvar primaryColor = options.chartArea.primaryBgColor;\n\t\t\t\tvar secondaryColor = options.chartArea.secondaryBgColor || primaryColor;\n\t\t\t\tvar ctx = chart.ctx;\n\t\t\t\tvar chartArea = chart.chartArea;\n\t\t\t\tvar height = chartArea.bottom - chartArea.top;\n\t\t\t\tvar divisions = chart.scales.y.ticks.length - 1;\n\t\t\t\tvar factor = height / divisions;\n\n\t\t\t\tctx.save();\n\t\t\t\tfor (var ticks = 1; ticks <= divisions; ticks++) {\n\t\t\t\t\tif (ticks % 2 === 0) {\n\t\t\t\t\t\tctx.fillStyle = secondaryColor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctx.fillStyle = primaryColor;\n\t\t\t\t\t}\n\t\t\t\t\tvar rectY = chartArea.top;\n\t\t\t\t\tif (ticks > 1) {\n\t\t\t\t\t\trectY += (ticks - 1) * factor;\n\t\t\t\t\t}\n\t\t\t\t\tctx.fillRect(chartArea.left, rectY, chartArea.right - chartArea.left, factor);\n\t\t\t\t}\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t};\n\n\t// Applications analytics chart\n\tvar ctx = $('#awsm-jobs-overview-applications-analytics-chart');\n\tctx[0].height = 250;\n\tvar data = {\n\t\tlabels: awsmJobsAdminOverview.analytics_data.labels,\n\t\tdatasets: [ {\n\t\t\tlabel: awsmJobsAdminOverview.i18n.chart_label,\n\t\t\tdata: awsmJobsAdminOverview.analytics_data.data,\n\t\t\tfill: true,\n\t\t\tborderColor: '#6CFAE4',\n\t\t\tbackgroundColor: 'rgba(108, 250, 228, 0.15)', \n\t\t\tpointBackgroundColor: '#6CFAE4',\n\t\t\tpointHoverBackgroundColor: '#6CFAE4',\n\t\t\tpointHoverBorderColor: '#6CFAE4',\n\t\t\tborderWidth: 4,\n\t\t\tpointBorderWidth: 2,\n\t\t\tpointRadius: 1,\n\t\t\tpointHoverRadius: 5,\n\t\t\ttension: 0.4,\n\t\t\tpointHitRadius: 10,\n            \n\t\t} ]\n\t};\n\tvar options = {\n\t\tscales: {\n\t\t\tx: {\n\t\t\t\tgrid: {\n\t\t\t\t\tborderWidth: 1.5,\n\t\t\t\t\tdrawOnChartArea: false,\n\t\t\t\t\ttickWidth: 1.5,\n\t\t\t\t\tdisplay: false, // Remove vertical grid lines\n\t\t\t\t\tdrawBorder: false\n\t\t\t\t},\n\t\t\t\tticks: {\n\t\t\t\t\tfont: {\n\t\t\t\t\t\tweight: 'normal'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\ty: {\n\t\t\t\tgrid: {\n\t\t\t\t\tdrawBorder: false,\n\t\t\t\t\ttickLength: 10,\n\t\t\t\t\ttickWidth: 0,\n\t\t\t\t\tcolor: '#F2F2F2', // Set grid line color\n                    borderDash: [5, 5],\n\t\t\t\t\tdrawBorder: false // Set grid lines as dotted\n\t\t\t\t},\n\t\t\t\tticks: {\n\t\t\t\t\tfont: {\n\t\t\t\t\t\tweight: 'normal'\n\t\t\t\t\t},\n\t\t\t\t\tprecision: 0,\n\t\t\t\t\tstepSize: 5,\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\telements: {\n            line: {\n                borderColor: '#6CFAE4',\n                borderWidth: 4\n            },\n            point: {\n                radius: 1 // Hide the points\n            }\n        },\n\t\tlayout: {\n            padding: {\n                right: 20, // Padding to the right for y-axis\n                bottom: 20 // Padding to the bottom for x-axis\n            }\n        },\n\t\tplugins: {\n\t\t\tlegend: {\n\t\t\t\tdisplay: false\n\t\t\t}\n\t\t}\n\t};\n\n\tawsmJobsOverview.analyticsChart = {\n\t\tdata: data,\n\t\toption: options,\n\t\tplugins: [ chartAreaPlugin ]\n\t};\n\n\tvar analyticsChart = null;\n\tawsmJobsOverview.renderAnalyticsChart = function(reRender, chartData) {\n\t\treRender = typeof reRender !== 'undefined' ? reRender : false;\n\t\tchartData = typeof chartData !== 'undefined' ? chartData : false;\n\t\tif (reRender && analyticsChart) {\n\t\t\tanalyticsChart.destroy();\n\t\t\tanalyticsChart = null;\n\t\t}\n\t\tif (! analyticsChart) {\n\t\t\tanalyticsChart = new Chart(ctx, {\n\t\t\t\ttype: 'line',\n\t\t\t\tdata: data,\n\t\t\t\toptions: options,\n\t\t\t\tplugins: [ chartAreaPlugin ]\n\t\t\t});\n\t\t}\n\t\tif (chartData && 'labels' in chartData && 'data' in chartData) {\n\t\t\tanalyticsChart.data.labels = chartData.labels;\n\t\t\tanalyticsChart.data.datasets[0].data = chartData.data;\n\t\t\tif ('datasets' in chartData) {\n\t\t\t\tanalyticsChart.data.datasets = chartData.datasets;\n\t\t\t}\n\t\t\tanalyticsChart.reset();\n\t\t\tanalyticsChart.update();\n\t\t}\n\t};\n\n\tif (awsmJobsAdminOverview.analytics_data && 'data' in awsmJobsAdminOverview.analytics_data && awsmJobsAdminOverview.analytics_data.data.length > 0) {\n\t\tawsmJobsOverview.renderAnalyticsChart();\n\n\t\t$('.awsm-jobs-overview-mb-wrapper .meta-box-sortables').on('sortstop', function(e, ui) {\n\t\t\tif (ui.item.attr('id') === 'awsm-jobs-overview-applications-analytics') {\n\t\t\t\tawsmJobsOverview.renderAnalyticsChart(true);\n\t\t\t}\n\t\t});\n\t\t$('#awsm-jobs-overview-applications-analytics .handle-order-higher, #awsm-jobs-overview-applications-analytics .handle-order-lower' ).on('click.postboxes', function() {\n\t\t\tawsmJobsOverview.renderAnalyticsChart(true);\n\t\t});\n\t}\n});\n"]}