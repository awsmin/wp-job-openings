{"version":3,"sources":["overview.js"],"names":["jQuery","document","ready","$","awsmJobsOverview","window","chartAreaPlugin","postboxes","add_postbox_toggles","awsmJobsAdminOverview","screen_id","id","beforeDraw","chart","args","options","chartArea","primaryBgColor","primaryColor","secondaryColor","secondaryBgColor","ctx","height","bottom","top","divisions","scales","y","ticks","length","factor","save","fillStyle","rectY","fillRect","left","right","restore","data","labels","analytics_data","datasets","label","i18n","chart_label","fill","borderColor","backgroundColor","pointBackgroundColor","pointBorderColor","borderWidth","pointBorderWidth","pointRadius","pointHoverRadius","tension","x","grid","drawOnChartArea","tickWidth","font","weight","drawBorder","tickLength","precision","plugins","legend","display","chartAreaCustomizer","analyticsChart","option","renderAnalyticsChart","reRender","chartData","destroy","Chart","type","reset","update","on","e","ui","item","attr"],"mappings":"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","file":"admin-overview.min.js","sourcesContent":["/* global awsmJobsAdminOverview, postboxes, Chart */\n\n'use strict';\n\njQuery(document).ready(function($) {\n\tvar awsmJobsOverview = window.awsmJobsOverview = window.awsmJobsOverview || {};\n\n\t/*================ Meta-boxes ================*/\n\n\t// Activate toggle state.\n\tpostboxes.add_postbox_toggles(awsmJobsAdminOverview.screen_id);\n\n\t/*================ Charts ================*/\n\n\tvar chartAreaPlugin = {\n\t\tid: 'chartAreaCustomizer',\n\t\tbeforeDraw: function(chart, args, options) {\n\t\t\tif (options.chartArea && options.chartArea.primaryBgColor) {\n\t\t\t\tvar primaryColor = options.chartArea.primaryBgColor;\n\t\t\t\tvar secondaryColor = options.chartArea.secondaryBgColor || primaryColor;\n\t\t\t\tvar ctx = chart.ctx;\n\t\t\t\tvar chartArea = chart.chartArea;\n\t\t\t\tvar height = chartArea.bottom - chartArea.top;\n\t\t\t\tvar divisions = chart.scales.y.ticks.length - 1;\n\t\t\t\tvar factor = height / divisions;\n\n\t\t\t\tctx.save();\n\t\t\t\tfor (var ticks = 1; ticks <= divisions; ticks++) {\n\t\t\t\t\tif (ticks % 2 === 0) {\n\t\t\t\t\t\tctx.fillStyle = secondaryColor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctx.fillStyle = primaryColor;\n\t\t\t\t\t}\n\t\t\t\t\tvar rectY = chartArea.top;\n\t\t\t\t\tif (ticks > 1) {\n\t\t\t\t\t\trectY += (ticks - 1) * factor;\n\t\t\t\t\t}\n\t\t\t\t\tctx.fillRect(chartArea.left, rectY, chartArea.right - chartArea.left, factor);\n\t\t\t\t}\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t};\n\n\t// Applications analytics chart\n\tvar ctx = $('#awsm-jobs-overview-applications-analytics-chart');\n\tvar data = {\n\t\tlabels: awsmJobsAdminOverview.analytics_data.labels,\n\t\tdatasets: [ {\n\t\t\tlabel: awsmJobsAdminOverview.i18n.chart_label,\n\t\t\tdata: awsmJobsAdminOverview.analytics_data.data,\n\t\t\tfill: false,\n\t\t\tborderColor: '#149efe',\n\t\t\tbackgroundColor: '#149efe',\n\t\t\tpointBackgroundColor: '#0091ff',\n\t\t\tpointBorderColor: '#e9f5fe',\n\t\t\tborderWidth: 4,\n\t\t\tpointBorderWidth: 2,\n\t\t\tpointRadius: 4,\n\t\t\tpointHoverRadius: 5,\n\t\t\ttension: 0.1\n\t\t} ]\n\t};\n\tvar options = {\n\t\tscales: {\n\t\t\tx: {\n\t\t\t\tgrid: {\n\t\t\t\t\tborderWidth: 1.5,\n\t\t\t\t\tdrawOnChartArea: false,\n\t\t\t\t\ttickWidth: 1.5\n\t\t\t\t},\n\t\t\t\tticks: {\n\t\t\t\t\tfont: {\n\t\t\t\t\t\tweight: 'bold'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\ty: {\n\t\t\t\tgrid: {\n\t\t\t\t\tdrawBorder: false,\n\t\t\t\t\ttickLength: 10,\n\t\t\t\t\ttickWidth: 0\n\t\t\t\t},\n\t\t\t\tticks: {\n\t\t\t\t\tfont: {\n\t\t\t\t\t\tweight: 'bold'\n\t\t\t\t\t},\n\t\t\t\t\tprecision: 0\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tplugins: {\n\t\t\tlegend: {\n\t\t\t\tdisplay: false\n\t\t\t},\n\t\t\tchartAreaCustomizer: {\n\t\t\t\tchartArea: {\n\t\t\t\t\tprimaryBgColor: '#fafafa',\n\t\t\t\t\tsecondaryBgColor: '#fff'\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tawsmJobsOverview.analyticsChart = {\n\t\tdata: data,\n\t\toption: options,\n\t\tplugins: [ chartAreaPlugin ]\n\t};\n\n\tvar analyticsChart = null;\n\tawsmJobsOverview.renderAnalyticsChart = function(reRender, chartData) {\n\t\treRender = typeof reRender !== 'undefined' ? reRender : false;\n\t\tchartData = typeof chartData !== 'undefined' ? chartData : false;\n\t\tif (reRender && analyticsChart) {\n\t\t\tanalyticsChart.destroy();\n\t\t\tanalyticsChart = null;\n\t\t}\n\t\tif (! analyticsChart) {\n\t\t\tanalyticsChart = new Chart(ctx, {\n\t\t\t\ttype: 'line',\n\t\t\t\tdata: data,\n\t\t\t\toptions: options,\n\t\t\t\tplugins: [ chartAreaPlugin ]\n\t\t\t});\n\t\t}\n\t\tif (chartData && 'labels' in chartData && 'data' in chartData) {\n\t\t\tanalyticsChart.data.labels = chartData.labels;\n\t\t\tanalyticsChart.data.datasets[0].data = chartData.data;\n\t\t\tif ('datasets' in chartData) {\n\t\t\t\tanalyticsChart.data.datasets = chartData.datasets;\n\t\t\t}\n\t\t\tanalyticsChart.reset();\n\t\t\tanalyticsChart.update();\n\t\t}\n\t};\n\n\tif (awsmJobsAdminOverview.analytics_data && 'data' in awsmJobsAdminOverview.analytics_data && awsmJobsAdminOverview.analytics_data.data.length > 0) {\n\t\tawsmJobsOverview.renderAnalyticsChart();\n\n\t\t$('.awsm-jobs-overview-mb-wrapper .meta-box-sortables').on('sortstop', function(e, ui) {\n\t\t\tif (ui.item.attr('id') === 'awsm-jobs-overview-applications-analytics') {\n\t\t\t\tawsmJobsOverview.renderAnalyticsChart(true);\n\t\t\t}\n\t\t});\n\t\t$('#awsm-jobs-overview-applications-analytics .handle-order-higher, #awsm-jobs-overview-applications-analytics .handle-order-lower' ).on('click.postboxes', function() {\n\t\t\tawsmJobsOverview.renderAnalyticsChart(true);\n\t\t});\n\t}\n});\n"]}