!function(){"use strict";jQuery((function(a){var e=".awsm-b-job-wrap",t=".awsm-b-job-listings",s=".awsm-b-row",n=".awsm-b-filter-wrap",i=window.location.protocol+"//"+window.location.host+window.location.pathname,o=!0,r=a(t),l=r.find(".awsm-b-job-item").length,m=r.data("awsm-listings-total");function d(e){var t=[],s=["listings","specs","search","lang","taxonomy","termId"];s.push("awsm-layout"),s.push("awsm-hide-expired-jobs"),s.push("awsm-other-options"),s.push("awsm-listings-total"),a(document).trigger("awsmJobBlockListingsData",[s]);var n=e.data();return a.each(n,(function(e,n){-1===a.inArray(e,s)&&t.push({name:e,value:n})})),t}function c(e){var i=e.find(t),r=i.find(s),l=e.find(n+" form"),m=l.serializeArray(),c=i.data("listings"),u=i.data("specs"),p=e.find(".awsm-job-sort-filter").val(),f=i.data("awsm-layout"),b=i.data("awsm-hide-expired-jobs"),w=i.data("awsm-other-options"),g=i.data("awsm-listings-total");m.push({name:"sort",value:p}),m.push({name:"listings_per_page",value:c}),void 0!==u&&m.push({name:"shortcode_specs",value:u}),void 0!==f&&m.push({name:"awsm-layout",value:f}),void 0!==b&&m.push({name:"awsm-hide-expired-jobs",value:b}),void 0!==w&&m.push({name:"awsm-other-options",value:w}),void 0!==g&&m.push({name:"awsm-listings-total",value:g});var v=d(i);v.length>0&&(m=m.concat(v)),a(document).trigger("awsmJobBlockFiltersFormData",[i,m]);var j=i.data("current-page")||1;g&&c&&setTimeout((function(){h(i,j)}),0),o&&(o=!1,a.ajax({url:l.attr("action"),beforeSend:function(){i.addClass("awsm-b-jobs-loading")},data:m,type:l.attr("method")}).done((function(t){r.html(t);var s=i.data("awsm-listings-total"),n=r.find(".awsm-b-job-item").length;h(i,j,n,s);var o=e.find(".awsm-b-job-search");o.length>0&&(o.val().length>0?(e.find(".awsm-b-job-search-btn").addClass("awsm-job-hide"),e.find(".awsm-b-job-search-close-btn").removeClass("awsm-job-hide")):(e.find(".awsm-b-job-search-btn").removeClass("awsm-job-hide"),e.find(".awsm-b-job-search-close-btn").addClass("awsm-job-hide"))),a(document).trigger("awsmjobs_filtered_listings",[e,t])})).fail((function(a){console.log(a)})).always((function(){i.removeClass("awsm-b-jobs-loading"),o=!0})))}function h(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(n||(n=e.data("awsm-listings-total")),s||(s=e.find(".awsm-b-job-item").length),!isNaN(n)&&!isNaN(s)){var i=(t-1)*(e.data("listings")||10)+1,o=i+s-1;o>n&&(o=n),i<1&&(i=1),a("#awsm-job-count").text("Showing "+i+" â€“ "+o+" of "+n+" results")}}function u(e){var t=!1;return e.length>0&&e.find(".awsm-b-filter-option").each((function(){a(this).val().length>0&&(t=!0)})),t}function p(a){var s=a.parents(e),n=s.find(".awsm-b-job-search").val();if(s.find(t).data("search",n),n.length,b(s,"jq",n),awsmJobsPublic.deep_linking.search){var i=s.find('input[name="awsm_pagination_base"]');f("jq",n,i.val())}c(s)}h(r,1,l,m),a(e).length>0&&a(e).each((function(){var e=a(this),t=e.find(n+" form");(awsmJobsPublic.is_search.length>0||u(t))&&(o=!0,c(e))}));var f=function(a,e,t){t=(t=void 0!==t?t:i).split("?")[0];var s=new URLSearchParams(document.location.search);s.has("paged")&&s.delete("paged"),e.length>0?s.set(a,e):s.delete(a);var n=s.toString();n.length>0&&(n="?"+n),window.history.replaceState({},"",t+n)},b=function(a,e,t){var s=a.find('input[name="awsm_pagination_base"]');if(s.length>0){var n=s.val().split("?"),i="";n.length>1&&(i=n[1]);var o=new URLSearchParams(i);t.length>0?o.set(e,t):o.delete(e),s.val(n[0]+"?"+o.toString()),a.find('input[name="paged"]').val(1)}};function w(){a(".awsm-b-filter-wrap").not(".awsm-b-no-search-filter-wrap").each((function(){var e=a(this),t=e.find(".awsm-b-filter-item").first().offset().top,s=e.find(".awsm-b-filter-item").last().offset().top;window.innerWidth<768?e.removeClass("awsm-b-full-width-search-filter-wrap"):s>t&&e.addClass("awsm-b-full-width-search-filter-wrap")}))}a(n+" .awsm-b-filter-option").on("change",(function(t){t.preventDefault();var s=a(this),n=s.find("option:selected"),i=s.parents(e),o=s.parents(".awsm-b-filter-item").data("filter"),r=[];n.each((function(){var e=a(this).data("slug");e&&r.push(e)}));var l=r.length>0?encodeURIComponent(JSON.stringify(r)):"";if(b(i,o,l),awsmJobsPublic.deep_linking.spec){var m=i.find('input[name="awsm_pagination_base"]');f(o,l,m.val())}c(i)})),a(n+" .awsm-filter-checkbox").on("change",(function(t){var s={},n=a(this),i=n.parents(e),o=n.parents(".awsm-filter-list-item").data("filter");if(a(".awsm-filter-checkbox:checked").each((function(){var e=a(this).data("taxonomy"),t=a(this).data("term-id");s[e]||(s[e]=[]),s[e].push(t)})),awsmJobsPublic.deep_linking.spec){var r=i.find('input[name="awsm_pagination_base"]');f(o,encodeURIComponent(JSON.stringify(s)),r.val())}c(i)})),a(t+" .awsm-job-sort-filter").on("change",(function(t){var s=a(this).parents(e),n=s.find("select.awsm-job-sort-filter").val();if(b(s,"sort",n),awsmJobsPublic.deep_linking.search){var i=s.find('input[name="awsm_pagination_base"]');f("sort",n,i.val())}c(s)})),a(n+" .awsm-b-job-search-btn").on("click",(function(){p(a(this))})),a(n+" .awsm-b-job-search-close-btn").on("click",(function(){var t=a(this);t.parents(e).find(".awsm-b-job-search").val(""),p(t)})),a(n+" .awsm-b-job-search").on("keypress",(function(e){13==e.which&&(e.preventDefault(),p(a(this)))})),a(t).on("click",".awsm-b-jobs-pagination .awsm-b-load-more-btn, .awsm-b-jobs-pagination a.page-numbers",(function(i){i.preventDefault();var o=a(this),r=o.hasClass("awsm-b-load-more-btn"),l=1,m=[],c=o.parents(e),p=c.find(t),b=p.find(s),w=o.parents(".awsm-b-jobs-pagination"),g=p.data("listings"),v=(p.data("total-posts"),p.data("specs")),j=p.data("lang"),_=p.data("search"),y=p.data("awsm-layout"),k=p.data("awsm-hide-expired-jobs"),x=p.data("awsm-other-options");r?(o.prop("disabled",!0),l=void 0===(l=o.data("page"))?1:l):(o.parents(".page-numbers").find(".page-numbers").removeClass("current").removeAttr("aria-current"),o.addClass("current").attr("aria-current","page")),w.addClass("awsm-b-jobs-pagination-loading");var C=c.find(n+" form");if(u(C)){var P=C.find(".awsm-b-filter-option");m=P.serializeArray()}var S={};for(var J in C.find(".awsm-filter-checkbox:checked").each((function(){var e=a(this),t=e.data("taxonomy"),s=e.data("term-id");t&&s&&(S[t]||(S[t]=[]),S[t].push(s))})),S)S.hasOwnProperty(J)&&S[J].forEach((function(a){m.push({name:"awsm_job_specs_list[".concat(J,"][]"),value:a})}));if(!r){var N=o.attr("href"),D=N.split("?"),R="";if(D.length>1){var U=new URLSearchParams(D[1]);l=U.get("paged"),U.delete("paged"),U.toString().length>0&&(R="?"+U.toString())}N=D[0]+R,m.push({name:"awsm_pagination_base",value:D[0]+R}),awsmJobsPublic.deep_linking.pagination&&f("paged",l,N)}if(awsmJobsPublic.is_tax_archive){J=p.data("taxonomy"),console.log("test1");var A=p.data("termId");void 0!==J&&void 0!==A&&m.push({name:"awsm_job_spec["+J+"]",value:A})}m.push({name:"action",value:"block_loadmore"},{name:"paged",value:l}),void 0!==g&&m.push({name:"listings_per_page",value:g}),void 0!==v&&m.push({name:"shortcode_specs",value:v}),void 0!==y&&m.push({name:"awsm-layout",value:y}),void 0!==k&&m.push({name:"awsm-hide-expired-jobs",value:k}),void 0!==x&&m.push({name:"awsm-other-options",value:x}),"undefined"!=typeof listings_total&&m.push({name:"awsm-listings-total",value:listings_total}),void 0!==j&&m.push({name:"lang",value:j}),void 0!==_&&m.push({name:"jq",value:_}),a(document).trigger("awsmjobs_block_load_more",[p,m]);var I=d(p);I.length>0&&(m=m.concat(I)),a.ajax({url:awsmJobsPublic.ajaxurl,data:a.param(m),type:"POST",beforeSend:function(){r?o.text(awsmJobsPublic.i18n.loading_text):p.addClass("awsm-b-jobs-loading")}}).done((function(e){if(e){var t=w.data("effectDuration");w.remove(),r?b.append(e):(b.html(e),p.removeClass("awsm-b-jobs-loading"),void 0!==t&&(t=isNaN(t)?t:Number(t),a("html, body").animate({scrollTop:c.offset().top-25},t)));var s=b.find(".awsm-b-job-item").length,n=p.data("awsm-listings-total");h(p,1,s,n)}else o.remove();a(document).trigger("awsmjobs_load_more",[o,e])})).fail((function(a){console.log(a)}))})),a(document).on("click",".awsm-b-filter-toggle",(function(e){e.preventDefault();var t=a(this);t.toggleClass("awsm-on"),t.hasClass("awsm-on")?t.attr("aria-pressed","true"):t.attr("aria-pressed","false"),t.parent().find(".awsm-b-filter-items").slideToggle()})),a(".awsm-b-filter-wrap").not(".awsm-b-no-search-filter-wrap").length>0&&(w(),a(window).on("resize",w))}))}();