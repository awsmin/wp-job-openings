!function(){"use strict";jQuery((function(a){var e=".awsm-job-wrap",t=".awsm-job-listings",s=".awsm-filter-wrap",n=window.location.protocol+"//"+window.location.host+window.location.pathname,i=!0;function o(e){var t=[],s=["listings","specs","search","lang","taxonomy","termId"];s.push("layout"),s.push("hide_expired_jobs"),s.push("other_options"),a(document).trigger("awsmJobBlockListingsData",[s]);var n=e.data();return a.each(n,(function(e,n){-1===a.inArray(e,s)&&t.push({name:e,value:n})})),t}function r(e){var n=e.find(t),r=e.find(s+" form"),l=r.serializeArray(),d=n.data("listings"),m=n.data("specs"),c=n.data("layout"),p=n.data("hide_expired_jobs"),u=n.data("other_options");l.push({name:"listings_per_page",value:d}),void 0!==m&&l.push({name:"shortcode_specs",value:m}),void 0!==c&&l.push({name:"layout",value:c}),void 0!==p&&l.push({name:"hide_expired_jobs",value:p}),void 0!==u&&l.push({name:"other_options",value:u});var h=o(n);h.length>0&&(l=l.concat(h)),a(document).trigger("awsmJobBlockFiltersFormData",[n,l]),i&&(i=!1,a.ajax({url:r.attr("action"),beforeSend:function(){n.addClass("awsm-jobs-loading")},data:l,type:r.attr("method")}).done((function(t){n.html(t);var s=e.find(".awsm-job-search");s.length>0&&(s.val().length>0?(e.find(".awsm-job-search-btn").addClass("awsm-job-hide"),e.find(".awsm-job-search-close-btn").removeClass("awsm-job-hide")):e.find(".awsm-job-search-btn").removeClass("awsm-job-hide")),a(document).trigger("awsmjobs_filtered_listings",[e,t])})).fail((function(a){console.log(a)})).always((function(){n.removeClass("awsm-jobs-loading"),i=!0})))}function l(e){var t=!1;return e.length>0&&e.find(".awsm-filter-option").each((function(){a(this).val().length>0&&(t=!0)})),t}function d(a){var s=a.parents(e),n=s.find(".awsm-job-search").val();if(s.find(t).data("search",n),0===n.length&&s.find(".awsm-job-search-icon-wrapper").addClass("awsm-job-hide"),c(s,"jq",n),awsmJobsPublic.deep_linking.search){var i=s.find('input[name="awsm_pagination_base"]');m("jq",n,i.val())}r(s)}a(e).length>0&&a(e).each((function(){var e=a(this),t=e.find(s+" form");(awsmJobsPublic.is_search.length>0||l(t))&&(i=!0,r(e))}));var m=function(a,e,t){t=(t=void 0!==t?t:n).split("?")[0];var s=new URLSearchParams(document.location.search);s.has("paged")&&s.delete("paged"),e.length>0?s.set(a,e):s.delete(a);var i=s.toString();i.length>0&&(i="?"+i),window.history.replaceState({},"",t+i)},c=function(a,e,t){var s=a.find('input[name="awsm_pagination_base"]');if(s.length>0){var n=s.val().split("?"),i="";n.length>1&&(i=n[1]);var o=new URLSearchParams(i);t.length>0?o.set(e,t):o.delete(e),s.val(n[0]+"?"+o.toString()),a.find('input[name="paged"]').val(1)}};function p(){a(".awsm-filter-wrap").not(".awsm-no-search-filter-wrap").each((function(){var e=a(this),t=e.find(".awsm-filter-item").first().offset().top;e.find(".awsm-filter-item").last().offset().top>t?e.addClass("awsm-full-width-search-filter-wrap"):e.removeClass("awsm-full-width-search-filter-wrap")}))}a(s+" .awsm-filter-option").on("change",(function(t){t.preventDefault();var s=a(this),n=s.find("option:selected"),i=s.parents(e),o=s.parents(".awsm-filter-item").data("filter"),l=n.data("slug");if(c(i,o,l=void 0!==l?l:""),awsmJobsPublic.deep_linking.spec){var d=i.find('input[name="awsm_pagination_base"]');m(o,l,d.val())}r(i)})),a(s+" .awsm-job-search-btn").on("click",(function(){d(a(this))})),a(s+" .awsm-job-search-close-btn").on("click",(function(){var t=a(this);t.parents(e).find(".awsm-job-search").val(""),d(t)})),a(s+" .awsm-job-search").on("keypress",(function(e){13==e.which&&(e.preventDefault(),d(a(this)))})),a(t).on("click",".awsm-b-jobs-pagination .awsm-b-load-more-btn, .awsm-b-jobs-pagination a.page-numbers",(function(n){n.preventDefault();var i=a(this),r=i.hasClass("awsm-b-load-more-btn"),d=1,c=[],p=i.parents(e),u=p.find(t),h=i.parents(".awsm-b-jobs-pagination"),f=u.data("listings"),w=u.data("specs"),v=u.data("lang"),g=u.data("search"),b=u.data("layout"),_=u.data("hide_expired_jobs"),j=u.data("other_options");r?(i.prop("disabled",!0),d=void 0===(d=i.data("page"))?1:d):(i.parents(".page-numbers").find(".page-numbers").removeClass("current").removeAttr("aria-current"),i.addClass("current").attr("aria-current","page")),h.addClass("awsm-jobs-pagination-loading");var y=p.find(s+" form");if(l(y)&&(c=y.find(".awsm-filter-option").serializeArray()),!r){var C=i.attr("href"),x=C.split("?"),k="";if(x.length>1){var P=new URLSearchParams(x[1]);d=P.get("paged"),P.delete("paged"),P.toString().length>0&&(k="?"+P.toString())}C=x[0]+k,c.push({name:"awsm_pagination_base",value:x[0]+k}),awsmJobsPublic.deep_linking.pagination&&m("paged",d,C)}if(awsmJobsPublic.is_tax_archive){var S=u.data("taxonomy"),D=u.data("termId");void 0!==S&&void 0!==D&&c.push({name:"awsm_job_spec["+S+"]",value:D})}c.push({name:"action",value:"block_loadmore"},{name:"paged",value:d}),void 0!==f&&c.push({name:"listings_per_page",value:f}),void 0!==w&&c.push({name:"shortcode_specs",value:w}),void 0!==b&&c.push({name:"layout",value:b}),void 0!==_&&c.push({name:"hide_expired_jobs",value:_}),void 0!==j&&c.push({name:"other_options",value:j}),void 0!==v&&c.push({name:"lang",value:v}),void 0!==g&&c.push({name:"jq",value:g});var J=o(u);J.length>0&&(c=c.concat(J)),a.ajax({url:awsmJobsPublic.ajaxurl,data:a.param(c),type:"POST",beforeSend:function(){r?i.text(awsmJobsPublic.i18n.loading_text):u.addClass("awsm-jobs-loading")}}).done((function(e){if(e){var t=h.data("effectDuration");h.remove(),r?u.append(e):(u.html(e),u.removeClass("awsm-jobs-loading"),void 0!==t&&(t=isNaN(t)?t:Number(t),a("html, body").animate({scrollTop:p.offset().top-25},t)))}else i.remove();a(document).trigger("awsmjobs_load_more",[i,e])})).fail((function(a){console.log(a)}))})),a(".awsm-filter-item select").each((function(e){awsmDropDown(a(".awsm-filter-item select"))})),a(document).on("click",".awsm-filter-toggle",(function(e){e.preventDefault();var t=a(this);t.toggleClass("awsm-on"),t.hasClass("awsm-on")?t.attr("aria-pressed","true"):t.attr("aria-pressed","false"),t.parent().find(".awsm-filter-items").slideToggle()})),a(".awsm-filter-wrap").not(".awsm-no-search-filter-wrap").length>0&&(p(),a(window).on("resize",p))}))}();