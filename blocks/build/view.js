!function(){"use strict";jQuery((function(a){var e=".awsm-b-job-wrap",s=".awsm-b-job-listings",t=".awsm-b-job-listing-items",o=".awsm-b-filter-wrap",i=window.location.protocol+"//"+window.location.host+window.location.pathname,r=!0;function d(e){var s=[],t=["listings","specs","search","lang","taxonomy","termId"];t.push("awsm-layout"),t.push("awsm-hide-expired-jobs"),t.push("awsm-other-options"),t.push("awsm-listings-total"),t.push("awsm-selected-terms"),t.push("hz_sf_border_color"),t.push("hz_sf_border_width"),t.push("hz_sf_padding"),t.push("hz_sf_border_radius"),t.push("hz_sidebar_width"),t.push("block_id"),t.push("hz_ls_border_color"),t.push("hz_ls_border_width"),t.push("hz_ls_border_radius"),t.push("hz_jl_border_color"),t.push("hz_jl_border_width"),t.push("hz_jl_border_radius"),t.push("hz_jl_padding"),t.push("hz_bs_border_color"),t.push("hz_bs_border_width"),t.push("hz_bs_border_radius"),t.push("hz_bs_padding"),t.push("hz_button_background_color"),t.push("hz_button_text_color"),a(document).trigger("awsmJobBlockListingsData",[t]);var o=e.data();return a.each(o,(function(e,o){-1===a.inArray(e,t)&&s.push({name:e,value:o})})),s}function n(e){var i=e.find(s),n=i.find(t),l=e.find(o+" form"),h=[];if(l.length>0){h=l.serializeArray();var _=l.attr("method")?l.attr("method").toUpperCase():"POST"}else h.push({name:"action",value:"block_jobfilter"}),_="POST";var u=i.data("listings"),m=i.data("specs"),b=i.data("awsm-layout"),c=i.data("awsm-hide-expired-jobs"),p=i.data("awsm-selected-terms"),v=i.data("awsm-other-options"),f=i.data("awsm-listings-total"),w=i.data("hz_sf_border_color"),g=i.data("hz_sf_border_width"),z=i.data("hz_sf_padding"),j=i.data("hz_sf_border_radius"),y=i.data("hz_sidebar_width"),k=i.data("block_id"),x=i.data("hz_ls_border_color"),S=i.data("hz_ls_border_width"),C=i.data("hz_ls_border_radius"),J=i.data("hz_jl_border_color"),P=i.data("hz_jl_border_width"),O=i.data("hz_jl_border_radius"),N=i.data("hz_jl_padding"),q=i.data("hz_bs_border_color"),D=i.data("hz_bs_border_width"),B=i.data("hz_bs_border_radius"),L=i.data("hz_bs_padding"),T=i.data("hz_button_background_color"),U=i.data("hz_button_text_color");if(h.push({name:"listings_per_page",value:u}),void 0!==m&&h.push({name:"shortcode_specs",value:m}),void 0!==b&&h.push({name:"awsm-layout",value:b}),p){if("string"==typeof p)try{p=JSON.parse(p)}catch(a){console.error("Failed to parse selected_terms JSON:",a),p={}}h.push({name:"awsm-selected-terms",value:JSON.stringify(p)})}void 0!==c&&h.push({name:"awsm-hide-expired-jobs",value:c}),void 0!==v&&h.push({name:"awsm-other-options",value:v}),void 0!==f&&h.push({name:"awsm-listings-total",value:f}),void 0!==w&&h.push({name:"hz_sf_border_color",value:w}),void 0!==g&&h.push({name:"hz_sf_border_width",value:g}),void 0!==z&&h.push({name:"hz_sf_padding",value:JSON.stringify(z)}),void 0!==j&&h.push({name:"hz_sf_border_radius",value:j}),void 0!==y&&h.push({name:"hz_sidebar_width",value:y}),void 0!==k&&h.push({name:"block_id",value:k}),void 0!==x&&h.push({name:"hz_ls_border_color",value:x}),void 0!==S&&h.push({name:"hz_ls_border_width",value:S}),void 0!==C&&h.push({name:"hz_ls_border_radius",value:C}),void 0!==J&&h.push({name:"hz_jl_border_color",value:J}),void 0!==P&&h.push({name:"hz_jl_border_width",value:P}),void 0!==O&&h.push({name:"hz_jl_border_radius",value:O}),void 0!==N&&h.push({name:"hz_jl_padding",value:JSON.stringify(N)}),void 0!==q&&h.push({name:"hz_bs_border_color",value:q}),void 0!==D&&h.push({name:"hz_bs_border_width",value:D}),void 0!==B&&h.push({name:"hz_bs_border_radius",value:B}),void 0!==L&&h.push({name:"hz_bs_padding",value:JSON.stringify(L)}),void 0!==T&&h.push({name:"hz_button_background_color",value:T}),void 0!==U&&h.push({name:"hz_button_text_color",value:U});var A=d(i);if(A.length>0&&(h=h.concat(A)),a(document).trigger("awsmJobBlockFiltersFormData",[i,h]),r){r=!1;var F=l.length>0?l.attr("action"):awsmJobsPublic.ajaxurl;a.ajax({url:F,beforeSend:function(){i.addClass("awsm-jobs-loading")},data:h,type:_}).done((function(s){n.html(s.data.html),s.data.style&&jQuery("head").append(s.data.style);var t=e.find(".awsm-b-job-search");t.length>0&&(t.val().length>0?(e.find(".awsm-b-job-search-btn").addClass("awsm-job-hide"),e.find(".awsm-b-job-search-close-btn").removeClass("awsm-job-hide")):(e.find(".awsm-b-job-search-btn").removeClass("awsm-job-hide"),e.find(".awsm-b-job-search-close-btn").addClass("awsm-job-hide"))),a(document).trigger("awsmjobs_filtered_listings",[e,s.data.html])})).fail((function(a){console.log(a)})).always((function(){i.removeClass("awsm-jobs-loading"),r=!0}))}}function l(e){var s=!1;return e.length>0&&e.find(".awsm-b-filter-option").each((function(){a(this).val().length>0&&(s=!0)})),s}function h(a){var t=a.parents(e),o=t.find(".awsm-b-job-search").val();if(t.find(s).data("search",o),o.length,u(t,"jq",o),awsmJobsPublic.deep_linking.search){var i=t.find('input[name="awsm_pagination_base"]');_("jq",o,i.val())}n(t)}a(e).length>0&&a(e).each((function(){var e=a(this),s=e.find(o+" form");(awsmJobsPublic.is_search.length>0||l(s))&&(r=!0,n(e))})),a(e).length>0&&a(e).each((function(){var e=a(this),s=e.find(o+" form"),t=!1;new URLSearchParams(window.location.search).toString().length>0&&(t=!0),(t||l(s))&&(r=!0,n(e))}));var _=function(a,e,s){s=(s=void 0!==s?s:i).split("?")[0];var t=new URLSearchParams(document.location.search);t.has("paged")&&t.delete("paged"),e.length>0?t.set(a,e):t.delete(a);var o=t.toString();o.length>0&&(o="?"+o),window.history.replaceState({},"",s+o)},u=function(a,e,s){var t=a.find('input[name="awsm_pagination_base"]');if(t.length>0){var o=t.val().split("?"),i="";o.length>1&&(i=o[1]);var r=new URLSearchParams(i);s.length>0?r.set(e,s):r.delete(e),t.val(o[0]+"?"+r.toString()),a.find('input[name="paged"]').val(1)}};function m(){a(".awsm-b-filter-wrap").not(".awsm-b-no-search-filter-wrap").each((function(){var e=a(this),s=e.find(".awsm-b-filter-item").first().offset().top,t=e.find(".awsm-b-filter-item").last().offset().top;window.innerWidth<768?e.removeClass("awsm-b-full-width-search-filter-wrap"):t>s&&e.addClass("awsm-b-full-width-search-filter-wrap")}))}a(".awsm-b-job-no-more-jobs-get").length>0&&(a(".awsm-b-job-listings").hide(),a(".awsm-b-job-no-more-jobs-get").slice(1).hide()),a(o+" .awsm-b-filter-option").on("change",(function(s){s.preventDefault(),a(".awsm-b-job-listings").show();var t=a(this),o=t.closest(e),i=t.closest(".awsm-b-filter-item").data("filter"),r=t.prop("multiple"),d=t.find("option"),l=d.eq(0),h=t.find("option:selected"),m=l.prop("selected"),b=t.closest(".awsm-b-filter-item").find("ul li"),c=(b.eq(0),b.filter(".selected"),t.closest(".awsm-b-filter-item").find('input[type="checkbox"]').length>0),p=[];if(r)m?(d.prop("selected",!0).addClass("selected"),b.addClass("selected"),p=d.slice(1).map((function(){return a(this).data("slug")})).get().filter(Boolean)):0===h.length?(d.prop("selected",!1).removeClass("selected"),b.removeClass("selected"),p=[]):(h.each((function(){a(this).prop("selected",!0).addClass("selected");var e=a(this).index();b.eq(e).addClass("selected")})),p=h.map((function(){return a(this).data("slug")})).get().filter(Boolean));else if(c){var v=t.closest(".awsm-b-filter-item").find('input[type="checkbox"]');v.eq(0).prop("checked")?(v.prop("checked",!0).addClass("selected").trigger("change"),p=v.slice(1).map((function(){return a(this).data("slug")})).get().filter(Boolean)):p=v.filter(":checked").map((function(){return a(this).data("slug")})).get().filter(Boolean)}else p=h.data("slug")?[h.data("slug")]:[];var f=p.length>0?p.join(","):"";if(a(".awsm-job-listings").length>0&&o.find(".awsm-b-job-no-more-jobs-get").hide(),u(o,i,f),awsmJobsPublic.deep_linking.spec){var w=o.find('input[name="awsm_pagination_base"]');_(i,f,w.val())}n(o)})),a(o+" .awsm-filter-checkbox").on("change",(function(s){var t={},o=[],i=a(this),r=i.parents(e),d=i.parents(".awsm-filter-list-item").data("filter");a(".awsm-filter-checkbox:checked").each((function(){var e=a(this).data("taxonomy"),s=a(this).data("term-id"),i=a(this).data("slug");i&&o.push(i),t[e]||(t[e]=[]),t[e].push(s)}));var l=o.length>0?o.join(","):"";if(awsmJobsPublic.deep_linking.spec){var h=r.find('input[name="awsm_pagination_base"]');_(d,l,h.val())}n(r)})),a(o+" .awsm-b-job-search-btn").on("click",(function(){h(a(this))})),a(o+" .awsm-b-job-search-close-btn").on("click",(function(){var s=a(this);s.parents(e).find(".awsm-b-job-search").val(""),h(s)})),a(o+" .awsm-b-job-search").on("keypress",(function(e){13==e.which&&(e.preventDefault(),h(a(this)))})),a(s).on("click",".awsm-b-jobs-pagination .awsm-b-load-more-btn, .awsm-b-jobs-pagination a.page-numbers",(function(i){i.preventDefault();var r=a(this),n=r.hasClass("awsm-b-load-more-btn"),h=1,u=[],m=r.parents(e),b=m.find(s),c=b.find(t),p=r.parents(".awsm-b-jobs-pagination"),v=b.data("listings"),f=(b.data("total-posts"),b.data("specs")),w=b.data("lang"),g=b.data("search"),z=b.data("awsm-layout"),j=b.data("awsm-hide-expired-jobs"),y=b.data("awsm-selected-terms"),k=b.data("awsm-other-options"),x=b.data("hz_sf_border_color"),S=b.data("hz_sf_border_width"),C=b.data("hz_sf_padding"),J=b.data("hz_sf_border_radius"),P=b.data("hz_sidebar_width"),O=b.data("block_id"),N=b.data("hz_ls_border_color"),q=b.data("hz_ls_border_width"),D=b.data("hz_ls_border_radius"),B=b.data("hz_jl_border_color"),L=b.data("hz_jl_border_width"),T=b.data("hz_jl_border_radius"),U=b.data("hz_jl_padding"),A=b.data("hz_bs_border_color"),F=b.data("hz_bs_border_width"),R=b.data("hz_bs_border_radius"),I=b.data("hz_bs_padding"),Q=b.data("hz_button_background_color"),E=b.data("hz_button_text_color");n?(r.prop("disabled",!0),h=void 0===(h=r.data("page"))?1:h):(r.parents(".page-numbers").find(".page-numbers").removeClass("current").removeAttr("aria-current"),r.addClass("current").attr("aria-current","page")),p.addClass("awsm-b-jobs-pagination-loading");var W=m.find(o+" form");if(l(W)){var G=W.find(".awsm-b-filter-option");u=G.serializeArray()}var H={};for(var K in W.find(".awsm-filter-checkbox:checked").each((function(){var e=a(this),s=e.data("taxonomy"),t=e.data("term-id");s&&t&&(H[s]||(H[s]=[]),H[s].push(t))})),H)H.hasOwnProperty(K)&&H[K].forEach((function(a){u.push({name:"awsm_job_specs_list[".concat(K,"][]"),value:a})}));if(!n){var M=r.attr("href"),V=M.split("?"),X="";if(V.length>1){var Y=new URLSearchParams(V[1]);h=Y.get("paged"),Y.delete("paged"),Y.toString().length>0&&(X="?"+Y.toString())}M=V[0]+X,u.push({name:"awsm_pagination_base",value:V[0]+X}),awsmJobsPublic.deep_linking.pagination&&_("paged",h,M)}if(awsmJobsPublic.is_tax_archive){K=b.data("taxonomy");var Z=b.data("termId");void 0!==K&&void 0!==Z&&u.push({name:"awsm_job_spec["+K+"]",value:Z})}if(u.push({name:"action",value:"block_loadmore"},{name:"paged",value:h}),void 0!==v&&u.push({name:"listings_per_page",value:v}),void 0!==f&&u.push({name:"shortcode_specs",value:f}),void 0!==z&&u.push({name:"awsm-layout",value:z}),void 0!==j&&u.push({name:"awsm-hide-expired-jobs",value:j}),y){if("string"==typeof y)try{y=JSON.parse(y)}catch(a){console.error("Failed to parse selected_terms JSON:",a),y={}}u.push({name:"awsm-selected-terms",value:JSON.stringify(y)})}void 0!==k&&u.push({name:"awsm-other-options",value:k}),"undefined"!=typeof listings_total&&u.push({name:"awsm-listings-total",value:listings_total}),void 0!==w&&u.push({name:"lang",value:w}),void 0!==g&&u.push({name:"jq",value:g}),void 0!==x&&u.push({name:"hz_sf_border_color",value:x}),void 0!==S&&u.push({name:"hz_sf_border_width",value:S}),void 0!==C&&u.push({name:"hz_sf_padding",value:JSON.stringify(C)}),void 0!==J&&u.push({name:"hz_sf_border_radius",value:J}),void 0!==P&&u.push({name:"hz_sidebar_width",value:P}),void 0!==O&&u.push({name:"block_id",value:O}),void 0!==N&&u.push({name:"hz_ls_border_color",value:N}),void 0!==q&&u.push({name:"hz_ls_border_width",value:q}),void 0!==D&&u.push({name:"hz_ls_border_radius",value:D}),void 0!==B&&u.push({name:"hz_jl_border_color",value:B}),void 0!==L&&u.push({name:"hz_jl_border_width",value:L}),void 0!==T&&u.push({name:"hz_jl_border_radius",value:T}),void 0!==U&&u.push({name:"hz_jl_padding",value:JSON.stringify(U)}),void 0!==A&&u.push({name:"hz_bs_border_color",value:A}),void 0!==F&&u.push({name:"hz_bs_border_width",value:F}),void 0!==R&&u.push({name:"hz_bs_border_radius",value:R}),void 0!==I&&u.push({name:"hz_bs_padding",value:JSON.stringify(I)}),void 0!==Q&&u.push({name:"hz_button_background_color",value:Q}),void 0!==E&&u.push({name:"hz_button_text_color",value:E}),a(document).trigger("awsmjobs_block_load_more",[b,u]);var $=d(b);$.length>0&&(u=u.concat($)),a.ajax({url:awsmJobsPublic.ajaxurl,data:a.param(u),type:"POST",beforeSend:function(){n?r.text(awsmJobsPublic.i18n.loading_text):b.addClass("awsm-jobs-loading")}}).done((function(e){if(e.data.html){var s=p.data("effectDuration");p.remove(),n?c.append(e.data.html):(c.html(e.data.html),b.removeClass("awsm-jobs-loading"),void 0!==s&&(s=isNaN(s)?s:Number(s),a("html, body").animate({scrollTop:m.offset().top-25},s)))}else r.remove();a(document).trigger("awsmjobs_load_more",[r,e.data.html])})).fail((function(a){console.log(a)}))})),a(document).on("click",".awsm-b-filter-toggle",(function(e){e.preventDefault();var s=a(this);s.toggleClass("awsm-on"),s.hasClass("awsm-on")?s.attr("aria-pressed","true"):s.attr("aria-pressed","false"),s.parent().find(".awsm-b-filter-items").slideToggle()})),a(".awsm-b-filter-wrap").not(".awsm-b-no-search-filter-wrap").length>0&&(m(),a(window).on("resize",m))}))}();