!function(){"use strict";jQuery((function(a){var e=".awsm-b-job-wrap",s=".awsm-b-job-listings",t=".awsm-b-job-listing-items",n=".awsm-b-filter-wrap",i=window.location.protocol+"//"+window.location.host+window.location.pathname,o=!0;function r(e){var s=[],t=["listings","specs","search","lang","taxonomy","termId"];t.push("awsm-layout"),t.push("awsm-hide-expired-jobs"),t.push("awsm-other-options"),t.push("awsm-listings-total"),a(document).trigger("awsmJobBlockListingsData",[t]);var n=e.data();return a.each(n,(function(e,n){-1===a.inArray(e,t)&&s.push({name:e,value:n})})),s}function l(e){var i=e.find(s),l=i.find(t),m=e.find(n+" form"),d=m.serializeArray(),c=i.data("listings"),h=i.data("specs"),p=e.find(".awsm-job-sort-filter").val(),u=i.data("awsm-layout"),b=i.data("awsm-hide-expired-jobs"),f=i.data("awsm-other-options"),w=i.data("awsm-listings-total"),g=[],v="";i.each((function(){a.each(this.dataset,(function(a,e){a.startsWith("job__")&&(e.includes(",")?g.push(e.split(",")):v=e)}))})),g.length>0&&d.push({name:"awsm_job_specs_list",value:g.join(",")}),v&&d.push({name:"awsm_job_spec",value:v}),d.push({name:"listings_per_page",value:c}),d.push({name:"filter_sort",value:p}),d.push({name:"listings_per_page",value:c}),void 0!==h&&d.push({name:"shortcode_specs",value:h}),void 0!==u&&d.push({name:"awsm-layout",value:u}),void 0!==b&&d.push({name:"awsm-hide-expired-jobs",value:b}),void 0!==f&&d.push({name:"awsm-other-options",value:f}),void 0!==w&&d.push({name:"awsm-listings-total",value:w});var j=r(i);j.length>0&&(d=d.concat(j)),a(document).trigger("awsmJobBlockFiltersFormData",[i,d]),o&&(o=!1,a.ajax({url:m.attr("action"),beforeSend:function(){i.addClass("awsm-jobs-loading")},data:d,type:m.attr("method")}).done((function(s){l.html(s);var t=e.find(".awsm-b-job-search");t.length>0&&(t.val().length>0?(e.find(".awsm-b-job-search-btn").addClass("awsm-job-hide"),e.find(".awsm-b-job-search-close-btn").removeClass("awsm-job-hide")):(e.find(".awsm-b-job-search-btn").removeClass("awsm-job-hide"),e.find(".awsm-b-job-search-close-btn").addClass("awsm-job-hide"))),a(document).trigger("awsmjobs_filtered_listings",[e,s])})).fail((function(a){console.log(a)})).always((function(){i.removeClass("awsm-jobs-loading"),o=!0})))}function m(e){var s=!1;return e.length>0&&e.find(".awsm-b-filter-option").each((function(){a(this).val().length>0&&(s=!0)})),s}function d(a){var t=a.parents(e),n=t.find(".awsm-b-job-search").val();if(t.find(s).data("search",n),n.length,h(t,"jq",n),awsmJobsPublic.deep_linking.search){var i=t.find('input[name="awsm_pagination_base"]');c("jq",n,i.val())}l(t)}a(e).length>0&&a(e).each((function(){var e=a(this),s=e.find(n+" form");(awsmJobsPublic.is_search.length>0||m(s))&&(o=!0,l(e))}));var c=function(a,e,s){s=(s=void 0!==s?s:i).split("?")[0];var t=new URLSearchParams(document.location.search);t.has("paged")&&t.delete("paged"),e.length>0?t.set(a,e):t.delete(a);var n=t.toString();n.length>0&&(n="?"+n),window.history.replaceState({},"",s+n)},h=function(a,e,s){var t=a.find('input[name="awsm_pagination_base"]');if(t.length>0){var n=t.val().split("?"),i="";n.length>1&&(i=n[1]);var o=new URLSearchParams(i);s.length>0?o.set(e,s):o.delete(e),t.val(n[0]+"?"+o.toString()),a.find('input[name="paged"]').val(1)}};function p(){a(".awsm-b-filter-wrap").not(".awsm-b-no-search-filter-wrap").each((function(){var e=a(this),s=e.find(".awsm-b-filter-item").first().offset().top,t=e.find(".awsm-b-filter-item").last().offset().top;window.innerWidth<768?e.removeClass("awsm-b-full-width-search-filter-wrap"):t>s&&e.addClass("awsm-b-full-width-search-filter-wrap")}))}a(".awsm-b-job-no-more-jobs-get").length>0&&(a(".awsm-b-job-listings").hide(),a(".awsm-b-job-no-more-jobs-get").slice(1).hide()),a(n+" .awsm-b-filter-option").on("change",(function(s){s.preventDefault(),a(".awsm-b-job-listings").show();var t=a(this),n=t.find("option:selected"),i=t.parents(e),o=t.parents(".awsm-b-filter-item").data("filter"),r=[];n.each((function(){var e=a(this).data("slug");e&&r.push(e)}));var m=r.length>0?r.join(","):"";if(a(".awsm-b-job-listings").length>0&&i.find(".awsm-b-job-no-more-jobs-get").hide(),h(i,o,m),awsmJobsPublic.deep_linking.spec){var d=i.find('input[name="awsm_pagination_base"]');c(o,m,d.val())}l(i)})),a(n+" .awsm-filter-checkbox").on("change",(function(s){var t={},n=[],i=a(this),o=i.parents(e),r=i.parents(".awsm-filter-list-item").data("filter");a(".awsm-filter-checkbox:checked").each((function(){var e=a(this).data("taxonomy"),s=a(this).data("term-id"),i=a(this).data("slug");i&&n.push(i),t[e]||(t[e]=[]),t[e].push(s)}));var m=n.length>0?n.join(","):"";if(awsmJobsPublic.deep_linking.spec){var d=o.find('input[name="awsm_pagination_base"]');c(r,m,d.val())}l(o)})),a(s+" .awsm-job-sort-filter").on("change",(function(s){var t=a(this).parents(e),n=t.find("select.awsm-job-sort-filter").val();if(h(t,"sort",n),awsmJobsPublic.deep_linking.search){var i=t.find('input[name="awsm_pagination_base"]');c("sort",n,i.val())}l(t)})),a(n+" .awsm-b-job-search-btn").on("click",(function(){d(a(this))})),a(n+" .awsm-b-job-search-close-btn").on("click",(function(){var s=a(this);s.parents(e).find(".awsm-b-job-search").val(""),d(s)})),a(n+" .awsm-b-job-search").on("keypress",(function(e){13==e.which&&(e.preventDefault(),d(a(this)))})),a(s).on("click",".awsm-b-jobs-pagination .awsm-b-load-more-btn, .awsm-b-jobs-pagination a.page-numbers",(function(i){i.preventDefault();var o=a(this),l=o.hasClass("awsm-b-load-more-btn"),d=1,h=[],p=o.parents(e),u=p.find(s),b=u.find(t),f=o.parents(".awsm-b-jobs-pagination"),w=u.data("listings"),g=(u.data("total-posts"),u.data("specs")),v=u.data("lang"),j=u.data("search"),_=u.data("awsm-layout"),y=u.data("awsm-hide-expired-jobs"),k=u.data("awsm-other-options");l?(o.prop("disabled",!0),d=void 0===(d=o.data("page"))?1:d):(o.parents(".page-numbers").find(".page-numbers").removeClass("current").removeAttr("aria-current"),o.addClass("current").attr("aria-current","page")),f.addClass("awsm-b-jobs-pagination-loading");var x=p.find(n+" form");if(m(x)){var C=x.find(".awsm-b-filter-option");h=C.serializeArray()}var P={};for(var J in x.find(".awsm-filter-checkbox:checked").each((function(){var e=a(this),s=e.data("taxonomy"),t=e.data("term-id");s&&t&&(P[s]||(P[s]=[]),P[s].push(t))})),P)P.hasOwnProperty(J)&&P[J].forEach((function(a){h.push({name:"awsm_job_specs_list[".concat(J,"][]"),value:a})}));if(!l){var S=o.attr("href"),D=S.split("?"),A="";if(D.length>1){var L=new URLSearchParams(D[1]);d=L.get("paged"),L.delete("paged"),L.toString().length>0&&(A="?"+L.toString())}S=D[0]+A,h.push({name:"awsm_pagination_base",value:D[0]+A}),awsmJobsPublic.deep_linking.pagination&&c("paged",d,S)}if(awsmJobsPublic.is_tax_archive){J=u.data("taxonomy");var q=u.data("termId");void 0!==J&&void 0!==q&&h.push({name:"awsm_job_spec["+J+"]",value:q})}h.push({name:"action",value:"block_loadmore"},{name:"paged",value:d}),void 0!==w&&h.push({name:"listings_per_page",value:w}),void 0!==g&&h.push({name:"shortcode_specs",value:g}),void 0!==_&&h.push({name:"awsm-layout",value:_}),void 0!==y&&h.push({name:"awsm-hide-expired-jobs",value:y}),void 0!==k&&h.push({name:"awsm-other-options",value:k}),"undefined"!=typeof listings_total&&h.push({name:"awsm-listings-total",value:listings_total}),void 0!==v&&h.push({name:"lang",value:v}),void 0!==j&&h.push({name:"jq",value:j}),a(document).trigger("awsmjobs_block_load_more",[u,h]);var z=r(u);z.length>0&&(h=h.concat(z)),a.ajax({url:awsmJobsPublic.ajaxurl,data:a.param(h),type:"POST",beforeSend:function(){l?o.text(awsmJobsPublic.i18n.loading_text):u.addClass("awsm-jobs-loading")}}).done((function(e){if(e){var s=f.data("effectDuration");f.remove(),l?(console.log(b),b.append(e)):(b.html(e),u.removeClass("awsm-jobs-loading"),void 0!==s&&(s=isNaN(s)?s:Number(s),a("html, body").animate({scrollTop:p.offset().top-25},s)))}else o.remove();a(document).trigger("awsmjobs_load_more",[o,e])})).fail((function(a){console.log(a)}))})),a(document).on("click",".awsm-b-filter-toggle",(function(e){e.preventDefault();var s=a(this);s.toggleClass("awsm-on"),s.hasClass("awsm-on")?s.attr("aria-pressed","true"):s.attr("aria-pressed","false"),s.parent().find(".awsm-b-filter-items").slideToggle()})),a(".awsm-b-filter-wrap").not(".awsm-b-no-search-filter-wrap").length>0&&(p(),a(window).on("resize",p))}))}();