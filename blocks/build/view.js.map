{"version":3,"file":"view.js","mappings":"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","sources":["webpack://joblistings/./src/view.js"],"sourcesContent":["'use strict';\n\njQuery( function ( $ ) {\n\tconst rootWrapperSelector = '.awsm-b-job-wrap';\n\tconst wrapperSelector = '.awsm-b-job-listings';\n\tconst sectionSelector = '.awsm-b-job-listing-items';\n\n\t/* ========== Job Search and Filtering ========== */\n\n\tconst filterSelector = '.awsm-b-filter-wrap';\n\tconst currentUrl =\n\t\twindow.location.protocol +\n\t\t'//' +\n\t\twindow.location.host +\n\t\twindow.location.pathname;\n\tlet triggerFilter = true;\n\n\tfunction getListingsData( $wrapper ) {\n\t\tconst data = [];\n\t\tconst parsedListingsAttrs = [\n\t\t\t'listings',\n\t\t\t'specs',\n\t\t\t'search',\n\t\t\t'lang',\n\t\t\t'taxonomy',\n\t\t\t'termId',\n\t\t];\n\n\t\t/* added for block */\n\t\tparsedListingsAttrs.push( 'awsm-layout' );\n\t\tparsedListingsAttrs.push( 'awsm-hide-expired-jobs' );\n\t\tparsedListingsAttrs.push( 'awsm-other-options' );\n\t\tparsedListingsAttrs.push( 'awsm-listings-total' );\n\t\tparsedListingsAttrs.push( 'awsm-selected-terms' );\n\t\t/* end */\n\t\t$( document ).trigger( 'awsmJobBlockListingsData', [\n\t\t\tparsedListingsAttrs,\n\t\t] );\n\n\t\tconst dataAttrs = $wrapper.data();\n\t\t$.each( dataAttrs, function ( dataAttr, value ) {\n\t\t\tif ( $.inArray( dataAttr, parsedListingsAttrs ) === -1 ) {\n\t\t\t\tdata.push( {\n\t\t\t\t\tname: dataAttr,\n\t\t\t\t\tvalue,\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t\treturn data;\n\t}\n\n\tfunction awsmJobFilters( $rootWrapper ) {\n\t\tconst $wrapper = $rootWrapper.find( wrapperSelector );\n\t\tconst $rowWrapper = $wrapper.find( sectionSelector );\n\t\tconst $filterForm = $rootWrapper.find( filterSelector + ' form' );\n\t\tlet formData = [];\n\n\t\tif ( $filterForm.length > 0 ) {\n\t\t\t// Form exists → Serialize form data\n\t\t\tformData = $filterForm.serializeArray();\n\t\t\tvar formMethod = $filterForm.attr( 'method' )\n\t\t\t\t? $filterForm.attr( 'method' ).toUpperCase()\n\t\t\t\t: 'POST';\n\t\t} else {\n\t\t\t// Form is missing → Manually construct data\n\t\t\tformData.push( { name: 'action', value: 'block_jobfilter' } ); // Ensure action is included\n\t\t\tvar formMethod = 'POST';\n\t\t}\n\n\t\tconst listings = $wrapper.data( 'listings' );\n\t\tconst specs = $wrapper.data( 'specs' );\n\t\tconst layout = $wrapper.data( 'awsm-layout' );\n\t\tconst hide_expired_jobs = $wrapper.data( 'awsm-hide-expired-jobs' );\n\t\tlet selected_terms = $wrapper.data( 'awsm-selected-terms' );\n\t\tconst other_options = $wrapper.data( 'awsm-other-options' );\n\t\tconst listings_total = $wrapper.data( 'awsm-listings-total' );\n\n\t\tformData.push( { name: 'listings_per_page', value: listings } );\n\n\t\tif ( typeof specs !== 'undefined' ) {\n\t\t\tformData.push( { name: 'shortcode_specs', value: specs } );\n\t\t}\n\n\t\tif ( typeof layout !== 'undefined' ) {\n\t\t\tformData.push( { name: 'awsm-layout', value: layout } );\n\t\t}\n\n\t\tif ( selected_terms ) {\n\t\t\tif ( typeof selected_terms === 'string' ) {\n\t\t\t\ttry {\n\t\t\t\t\tselected_terms = JSON.parse( selected_terms );\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Failed to parse selected_terms JSON:',\n\t\t\t\t\t\terror\n\t\t\t\t\t);\n\t\t\t\t\tselected_terms = {};\n\t\t\t\t}\n\t\t\t}\n\t\t\tformData.push( {\n\t\t\t\tname: 'awsm-selected-terms',\n\t\t\t\tvalue: JSON.stringify( selected_terms ),\n\t\t\t} );\n\t\t}\n\n\t\tif ( typeof hide_expired_jobs !== 'undefined' ) {\n\t\t\tformData.push( {\n\t\t\t\tname: 'awsm-hide-expired-jobs',\n\t\t\t\tvalue: hide_expired_jobs,\n\t\t\t} );\n\t\t}\n\n\t\tif ( typeof other_options !== 'undefined' ) {\n\t\t\tformData.push( {\n\t\t\t\tname: 'awsm-other-options',\n\t\t\t\tvalue: other_options,\n\t\t\t} );\n\t\t}\n\n\t\tif ( typeof listings_total !== 'undefined' ) {\n\t\t\tformData.push( {\n\t\t\t\tname: 'awsm-listings-total',\n\t\t\t\tvalue: listings_total,\n\t\t\t} );\n\t\t}\n\n\t\tconst listingsData = getListingsData( $wrapper );\n\t\tif ( listingsData.length > 0 ) {\n\t\t\tformData = formData.concat( listingsData );\n\t\t}\n\n\t\t// Trigger custom event to provide formData\n\t\t$( document ).trigger( 'awsmJobBlockFiltersFormData', [\n\t\t\t$wrapper,\n\t\t\tformData,\n\t\t] );\n\n\t\tif ( triggerFilter ) {\n\t\t\ttriggerFilter = false;\n\n\t\t\t// Determine action URL (fallback if form is missing)\n\t\t\tconst actionUrl =\n\t\t\t\t$filterForm.length > 0\n\t\t\t\t\t? $filterForm.attr( 'action' )\n\t\t\t\t\t: awsmJobsPublic.ajaxurl;\n\n\t\t\t$.ajax( {\n\t\t\t\turl: actionUrl,\n\t\t\t\tbeforeSend() {\n\t\t\t\t\t$wrapper.addClass( 'awsm-jobs-loading' );\n\t\t\t\t},\n\t\t\t\tdata: formData,\n\t\t\t\ttype: formMethod,\n\t\t\t} )\n\t\t\t\t.done( function ( data ) {\n\t\t\t\t\t$rowWrapper.html( data );\n\n\t\t\t\t\tconst $searchControl =\n\t\t\t\t\t\t$rootWrapper.find( '.awsm-b-job-search' );\n\t\t\t\t\tif ( $searchControl.length > 0 ) {\n\t\t\t\t\t\tif ( $searchControl.val().length > 0 ) {\n\t\t\t\t\t\t\t$rootWrapper\n\t\t\t\t\t\t\t\t.find( '.awsm-b-job-search-btn' )\n\t\t\t\t\t\t\t\t.addClass( 'awsm-job-hide' );\n\t\t\t\t\t\t\t$rootWrapper\n\t\t\t\t\t\t\t\t.find( '.awsm-b-job-search-close-btn' )\n\t\t\t\t\t\t\t\t.removeClass( 'awsm-job-hide' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$rootWrapper\n\t\t\t\t\t\t\t\t.find( '.awsm-b-job-search-btn' )\n\t\t\t\t\t\t\t\t.removeClass( 'awsm-job-hide' );\n\t\t\t\t\t\t\t$rootWrapper\n\t\t\t\t\t\t\t\t.find( '.awsm-b-job-search-close-btn' )\n\t\t\t\t\t\t\t\t.addClass( 'awsm-job-hide' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t$( document ).trigger( 'awsmjobs_filtered_listings', [\n\t\t\t\t\t\t$rootWrapper,\n\t\t\t\t\t\tdata,\n\t\t\t\t\t] );\n\t\t\t\t} )\n\t\t\t\t.fail( function ( xhr ) {\n\t\t\t\t\tconsole.log( xhr );\n\t\t\t\t} )\n\t\t\t\t.always( function () {\n\t\t\t\t\t$wrapper.removeClass( 'awsm-jobs-loading' );\n\t\t\t\t\ttriggerFilter = true;\n\t\t\t\t} );\n\t\t}\n\t}\n\n\tfunction filterCheck( $filterForm ) {\n\t\tlet check = false;\n\t\tif ( $filterForm.length > 0 ) {\n\t\t\tconst $filterOption = $filterForm.find( '.awsm-b-filter-option' );\n\t\t\t$filterOption.each( function () {\n\t\t\t\tif ( $( this ).val().length > 0 ) {\n\t\t\t\t\tcheck = true;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\treturn check;\n\t}\n\n\tfunction searchJobs( $elem ) {\n\t\tconst $rootWrapper = $elem.parents( rootWrapperSelector );\n\t\tconst searchQuery = $rootWrapper.find( '.awsm-b-job-search' ).val();\n\t\t$rootWrapper.find( wrapperSelector ).data( 'search', searchQuery );\n\t\tif ( searchQuery.length === 0 ) {\n\t\t\t//$rootWrapper.find('.awsm-b-job-search-icon-wrapper').addClass('awsm-b-job-hide');\n\t\t}\n\t\tsetPaginationBase( $rootWrapper, 'jq', searchQuery );\n\t\tif ( awsmJobsPublic.deep_linking.search ) {\n\t\t\tconst $paginationBase = $rootWrapper.find(\n\t\t\t\t'input[name=\"awsm_pagination_base\"]'\n\t\t\t);\n\t\t\tupdateQuery( 'jq', searchQuery, $paginationBase.val() );\n\t\t}\n\t\tawsmJobFilters( $rootWrapper );\n\t}\n\n\tif ( $( rootWrapperSelector ).length > 0 ) {\n\t\t$( rootWrapperSelector ).each( function () {\n\t\t\tconst $currentWrapper = $( this );\n\t\t\tconst $filterForm = $currentWrapper.find(\n\t\t\t\tfilterSelector + ' form'\n\t\t\t);\n\t\t\tif (\n\t\t\t\tawsmJobsPublic.is_search.length > 0 ||\n\t\t\t\tfilterCheck( $filterForm )\n\t\t\t) {\n\t\t\t\ttriggerFilter = true;\n\t\t\t\tawsmJobFilters( $currentWrapper );\n\t\t\t}\n\t\t} );\n\t}\n\n\tif ( $( rootWrapperSelector ).length > 0 ) {\n\t\t$( rootWrapperSelector ).each( function () {\n\t\t\tconst $currentWrapper = $( this );\n\t\t\tconst $filterForm = $currentWrapper.find(\n\t\t\t\tfilterSelector + ' form'\n\t\t\t);\n\n\t\t\tconst searchParams = new URLSearchParams( window.location.search );\n\t\t\tlet hasFiltersInURL = false;\n\n\t\t\tif ( searchParams.toString().length > 0 ) {\n\t\t\t\thasFiltersInURL = true;\n\t\t\t}\n\n\t\t\tif ( hasFiltersInURL || filterCheck( $filterForm ) ) {\n\t\t\t\ttriggerFilter = true;\n\t\t\t\tawsmJobFilters( $currentWrapper );\n\t\t\t}\n\t\t} );\n\t}\n\n\tvar updateQuery = function ( key, value, url ) {\n\t\turl = typeof url !== 'undefined' ? url : currentUrl;\n\t\turl = url.split( '?' )[ 0 ];\n\t\tconst searchParams = new URLSearchParams( document.location.search );\n\t\tif ( searchParams.has( 'paged' ) ) {\n\t\t\tsearchParams.delete( 'paged' );\n\t\t}\n\t\tif ( value.length > 0 ) {\n\t\t\tsearchParams.set( key, value );\n\t\t} else {\n\t\t\tsearchParams.delete( key );\n\t\t}\n\t\tlet modQueryString = searchParams.toString();\n\t\tif ( modQueryString.length > 0 ) {\n\t\t\tmodQueryString = '?' + modQueryString;\n\t\t}\n\t\twindow.history.replaceState( {}, '', url + modQueryString );\n\t};\n\n\tvar setPaginationBase = function ( $rootWrapper, key, value ) {\n\t\tconst $paginationBase = $rootWrapper.find(\n\t\t\t'input[name=\"awsm_pagination_base\"]'\n\t\t);\n\t\tif ( $paginationBase.length > 0 ) {\n\t\t\tconst splittedURL = $paginationBase.val().split( '?' );\n\t\t\tlet queryString = '';\n\t\t\tif ( splittedURL.length > 1 ) {\n\t\t\t\tqueryString = splittedURL[ 1 ];\n\t\t\t}\n\t\t\tconst searchParams = new URLSearchParams( queryString );\n\t\t\tif ( value.length > 0 ) {\n\t\t\t\tsearchParams.set( key, value );\n\t\t\t} else {\n\t\t\t\tsearchParams.delete( key );\n\t\t\t}\n\t\t\t$paginationBase.val(\n\t\t\t\tsplittedURL[ 0 ] + '?' + searchParams.toString()\n\t\t\t);\n\t\t\t$rootWrapper.find( 'input[name=\"paged\"]' ).val( 1 );\n\t\t}\n\t};\n\n\tif ( $( '.awsm-b-job-no-more-jobs-get' ).length > 0 ) {\n\t\t$( '.awsm-b-job-listings' ).hide();\n\t\t$( '.awsm-b-job-no-more-jobs-get' ).slice( 1 ).hide();\n\t}\n\n\t$(filterSelector + ' .awsm-b-filter-option').on('change', function (e) {\n\t\te.preventDefault();\n\t\t$('.awsm-b-job-listings').show();\n\t\n\t\tconst $elem = $(this);\n\t\tconst $rootWrapper = $elem.closest(rootWrapperSelector);\n\t\tconst currentSpec = $elem.closest('.awsm-b-filter-item').data('filter');\n\t\n\t\tconst isMultiple = $elem.prop('multiple'); // Check if it's a multiple select\n\t\tconst allOptions = $elem.find('option');\n\t\tconst firstOption = allOptions.eq(0); // \"All Job Type\"\n\t\tconst selectedOptions = $elem.find('option:selected');\n\t\tconst isAllSelected = firstOption.prop('selected');\n\t\n\t\t// **Fix: Restrict list item selection to current dropdown only**\n\t\tconst allLiItems = $elem.closest('.awsm-b-filter-item').find('ul li');\n\t\tconst firstLiItem = allLiItems.eq(0); // \"All Job Type\" in <ul>\n\t\tconst selectedLiItems = allLiItems.filter('.selected');\n\t\n\t\tconst isCheckboxFilter = $rootWrapper.find('input[type=\"checkbox\"]').length > 0;\n\t\tlet slugs = [];\n\t\n\t\tif (isMultiple) {\n\t\t\tif (isAllSelected) {\n\t\t\t\t// **Select all options within this dropdown only**\n\t\t\t\tallOptions.prop('selected', true).addClass('selected');\n\t\t\t\tallLiItems.addClass('selected'); // **Fix: Only apply to current dropdown**\n\t\t\t\tslugs = allOptions.slice(1).map(function () {\n\t\t\t\t\treturn $(this).data('slug');\n\t\t\t\t}).get().filter(Boolean);\n\t\t\t} else if (selectedOptions.length === 0) {\n\t\t\t\t// **Deselect all in the current dropdown only**\n\t\t\t\tallOptions.prop('selected', false).removeClass('selected');\n\t\t\t\tallLiItems.removeClass('selected'); // **Fix: Only affect current dropdown**\n\t\t\t\tslugs = [];\n\t\t\t} else {\n\t\t\t\t// **Handle individual selection within the current dropdown**\n\t\t\t\tselectedOptions.each(function () {\n\t\t\t\t\t$(this).prop('selected', true).addClass('selected');\n\t\t\t\t\tconst index = $(this).index();\n\t\t\t\t\tallLiItems.eq(index).addClass('selected'); // **Fix: Apply changes to corresponding <li>**\n\t\t\t\t});\n\t\n\t\t\t\tslugs = selectedOptions.map(function () {\n\t\t\t\t\treturn $(this).data('slug');\n\t\t\t\t}).get().filter(Boolean);\n\t\t\t}\n\t\t} else if (isCheckboxFilter) {\n\t\t\t// **Handle checkboxes**\n\t\t\tconst $checkboxes = $elem.closest('.awsm-b-filter-item').find('input[type=\"checkbox\"]');\n\t\t\tconst $allCheckbox = $checkboxes.eq(0); // First checkbox is \"All\"\n\t\n\t\t\tif ($allCheckbox.prop('checked')) {\n\t\t\t\t// **Select all checkboxes in this filter group only**\n\t\t\t\t$checkboxes.prop('checked', true).addClass('selected').trigger('change');\n\t\t\t\tslugs = $checkboxes.slice(1).map(function () {\n\t\t\t\t\treturn $(this).data('slug');\n\t\t\t\t}).get().filter(Boolean);\n\t\t\t} else {\n\t\t\t\t// **Handle individual checkbox selection**\n\t\t\t\tslugs = $checkboxes.filter(':checked').map(function () {\n\t\t\t\t\treturn $(this).data('slug');\n\t\t\t\t}).get().filter(Boolean);\n\t\t\t}\n\t\t} else {\n\t\t\t// **Single select logic**\n\t\t\tslugs = selectedOptions.data('slug') ? [selectedOptions.data('slug')] : [];\n\t\t}\n\t\n\t\tconst slugString = slugs.length > 0 ? slugs.join(',') : '';\n\t\n\t\t// **Update pagination and filters only for the affected dropdown**\n\t\tif ($('.awsm-job-listings').length > 0) {\n\t\t\t$rootWrapper.find('.awsm-b-job-no-more-jobs-get').hide();\n\t\t}\n\t\n\t\tsetPaginationBase($rootWrapper, currentSpec, slugString);\n\t\n\t\t// **Update the URL without affecting other dropdowns**\n\t\tif (awsmJobsPublic.deep_linking.spec) {\n\t\t\tconst $paginationBase = $rootWrapper.find('input[name=\"awsm_pagination_base\"]');\n\t\t\tupdateQuery(currentSpec, slugString, $paginationBase.val());\n\t\t}\n\t\n\t\tawsmJobFilters($rootWrapper);\n\t});\n\n\t$( filterSelector + ' .awsm-filter-checkbox' ).on(\n\t\t'change',\n\t\tfunction ( e ) {\n\t\t\tconst selectedFilters = {};\n\t\t\tconst slugs = []; // Initialize an array to collect slugs\n\t\t\tconst $elem = $( this );\n\t\t\tconst $rootWrapper = $elem.parents( rootWrapperSelector );\n\t\t\tconst currentSpec = $elem\n\t\t\t\t.parents( '.awsm-filter-list-item' )\n\t\t\t\t.data( 'filter' );\n\n\t\t\t// Loop through checked checkboxes and build selectedFilters and slugs array\n\t\t\t$( '.awsm-filter-checkbox:checked' ).each( function () {\n\t\t\t\tconst taxonomy = $( this ).data( 'taxonomy' );\n\t\t\t\tconst termId = $( this ).data( 'term-id' );\n\t\t\t\tconst slug = $( this ).data( 'slug' ); // Get the slug from the checkbox\n\n\t\t\t\t// Add the slug to the slugs array if it exists\n\t\t\t\tif ( slug ) {\n\t\t\t\t\tslugs.push( slug );\n\t\t\t\t}\n\n\t\t\t\t// Populate the selectedFilters object\n\t\t\t\tif ( ! selectedFilters[ taxonomy ] ) {\n\t\t\t\t\tselectedFilters[ taxonomy ] = [];\n\t\t\t\t}\n\t\t\t\tselectedFilters[ taxonomy ].push( termId );\n\t\t\t} );\n\n\t\t\t// Convert slugs array to a comma-separated string\n\t\t\tconst slugString = slugs.length > 0 ? slugs.join( ',' ) : '';\n\n\t\t\t// Handle deep linking\n\t\t\tif ( awsmJobsPublic.deep_linking.spec ) {\n\t\t\t\tconst $paginationBase = $rootWrapper.find(\n\t\t\t\t\t'input[name=\"awsm_pagination_base\"]'\n\t\t\t\t);\n\t\t\t\tupdateQuery( currentSpec, slugString, $paginationBase.val() ); // Use the comma-separated slugString\n\t\t\t}\n\n\t\t\t// Apply the job filters\n\t\t\tawsmJobFilters( $rootWrapper );\n\t\t}\n\t);\n\n\t$( filterSelector + ' .awsm-b-job-search-btn' ).on( 'click', function () {\n\t\tsearchJobs( $( this ) );\n\t} );\n\n\t$( filterSelector + ' .awsm-b-job-search-close-btn' ).on(\n\t\t'click',\n\t\tfunction () {\n\t\t\tconst $elem = $( this );\n\t\t\t$elem\n\t\t\t\t.parents( rootWrapperSelector )\n\t\t\t\t.find( '.awsm-b-job-search' )\n\t\t\t\t.val( '' );\n\t\t\tsearchJobs( $elem );\n\t\t}\n\t);\n\n\t$( filterSelector + ' .awsm-b-job-search' ).on( 'keypress', function ( e ) {\n\t\tif ( e.which == 13 ) {\n\t\t\te.preventDefault();\n\t\t\tsearchJobs( $( this ) );\n\t\t}\n\t} );\n\n\t/* ========== Job Listings Load More ========== */\n\t$( wrapperSelector ).on(\n\t\t'click',\n\t\t'.awsm-b-jobs-pagination .awsm-b-load-more-btn, .awsm-b-jobs-pagination a.page-numbers',\n\t\tfunction ( e ) {\n\t\t\te.preventDefault();\n\t\t\tconst $triggerElem = $( this );\n\t\t\tconst isDefaultPagination = $triggerElem.hasClass(\n\t\t\t\t'awsm-b-load-more-btn'\n\t\t\t);\n\t\t\tlet paged = 1;\n\t\t\tlet wpData = [];\n\n\t\t\tconst $mainContainer = $triggerElem.parents( rootWrapperSelector );\n\t\t\tconst $listingsContainer = $mainContainer.find( wrapperSelector );\n\t\t\tconst $listingsrowContainer =\n\t\t\t\t$listingsContainer.find( sectionSelector );\n\n\t\t\tconst $paginationWrapper = $triggerElem.parents(\n\t\t\t\t'.awsm-b-jobs-pagination'\n\t\t\t);\n\t\t\tconst listings = $listingsContainer.data( 'listings' );\n\t\t\tconst totalPosts = $listingsContainer.data( 'total-posts' ); // Assuming this is passed via data\n\t\t\tconst specs = $listingsContainer.data( 'specs' );\n\t\t\tconst lang = $listingsContainer.data( 'lang' );\n\t\t\tconst searchQuery = $listingsContainer.data( 'search' );\n\n\t\t\t/* added for block */\n\t\t\tconst layout = $listingsContainer.data( 'awsm-layout' );\n\t\t\tconst hide_expired_jobs = $listingsContainer.data(\n\t\t\t\t'awsm-hide-expired-jobs'\n\t\t\t);\n\t\t\tlet selected_terms = $listingsContainer.data(\n\t\t\t\t'awsm-selected-terms'\n\t\t\t);\n\t\t\tconst other_options =\n\t\t\t\t$listingsContainer.data( 'awsm-other-options' );\n\t\t\t/* end */\n\n\t\t\tif ( isDefaultPagination ) {\n\t\t\t\t$triggerElem.prop( 'disabled', true );\n\t\t\t\tpaged = $triggerElem.data( 'page' );\n\t\t\t\tpaged = typeof paged === 'undefined' ? 1 : paged;\n\t\t\t} else {\n\t\t\t\t$triggerElem\n\t\t\t\t\t.parents( '.page-numbers' )\n\t\t\t\t\t.find( '.page-numbers' )\n\t\t\t\t\t.removeClass( 'current' )\n\t\t\t\t\t.removeAttr( 'aria-current' );\n\t\t\t\t$triggerElem\n\t\t\t\t\t.addClass( 'current' )\n\t\t\t\t\t.attr( 'aria-current', 'page' );\n\t\t\t}\n\t\t\t$paginationWrapper.addClass( 'awsm-b-jobs-pagination-loading' );\n\n\t\t\t// filters\n\t\t\tconst $filterForm = $mainContainer.find( filterSelector + ' form' );\n\t\t\tif ( filterCheck( $filterForm ) ) {\n\t\t\t\tconst $filterOption = $filterForm.find(\n\t\t\t\t\t'.awsm-b-filter-option'\n\t\t\t\t);\n\t\t\t\twpData = $filterOption.serializeArray();\n\t\t\t}\n\n\t\t\tconst specsList = {};\n\t\t\t$filterForm\n\t\t\t\t.find( '.awsm-filter-checkbox:checked' )\n\t\t\t\t.each( function () {\n\t\t\t\t\tconst $checkbox = $( this );\n\t\t\t\t\tconst taxonomy = $checkbox.data( 'taxonomy' ); // Get taxonomy from data attribute\n\t\t\t\t\tconst termId = $checkbox.data( 'term-id' ); // Get term ID from data attribute\n\n\t\t\t\t\tif ( taxonomy && termId ) {\n\t\t\t\t\t\tif ( ! specsList[ taxonomy ] ) {\n\t\t\t\t\t\t\tspecsList[ taxonomy ] = []; // Initialize array for this taxonomy\n\t\t\t\t\t\t}\n\t\t\t\t\t\tspecsList[ taxonomy ].push( termId ); // Add term ID to the array\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\tfor ( var taxonomy in specsList ) {\n\t\t\t\tif ( specsList.hasOwnProperty( taxonomy ) ) {\n\t\t\t\t\tspecsList[ taxonomy ].forEach( function ( termId ) {\n\t\t\t\t\t\twpData.push( {\n\t\t\t\t\t\t\tname: `awsm_job_specs_list[${ taxonomy }][]`, // Add taxonomy as part of the key\n\t\t\t\t\t\t\tvalue: termId,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ! isDefaultPagination ) {\n\t\t\t\tlet paginationBaseURL = $triggerElem.attr( 'href' );\n\t\t\t\tconst splittedURL = paginationBaseURL.split( '?' );\n\t\t\t\tlet queryString = '';\n\t\t\t\tif ( splittedURL.length > 1 ) {\n\t\t\t\t\tconst searchParams = new URLSearchParams(\n\t\t\t\t\t\tsplittedURL[ 1 ]\n\t\t\t\t\t);\n\t\t\t\t\tpaged = searchParams.get( 'paged' );\n\t\t\t\t\tsearchParams.delete( 'paged' );\n\t\t\t\t\tif ( searchParams.toString().length > 0 ) {\n\t\t\t\t\t\tqueryString = '?' + searchParams.toString();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpaginationBaseURL = splittedURL[ 0 ] + queryString;\n\t\t\t\twpData.push( {\n\t\t\t\t\tname: 'awsm_pagination_base',\n\t\t\t\t\tvalue: splittedURL[ 0 ] + queryString,\n\t\t\t\t} );\n\t\t\t\tif ( awsmJobsPublic.deep_linking.pagination ) {\n\t\t\t\t\tupdateQuery( 'paged', paged, paginationBaseURL );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// taxonomy archives\n\t\t\tif ( awsmJobsPublic.is_tax_archive ) {\n\t\t\t\tvar taxonomy = $listingsContainer.data( 'taxonomy' );\n\t\t\t\tconst termId = $listingsContainer.data( 'termId' );\n\t\t\t\tif (\n\t\t\t\t\ttypeof taxonomy !== 'undefined' &&\n\t\t\t\t\ttypeof termId !== 'undefined'\n\t\t\t\t) {\n\t\t\t\t\twpData.push( {\n\t\t\t\t\t\tname: 'awsm_job_spec[' + taxonomy + ']',\n\t\t\t\t\t\tvalue: termId,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twpData.push(\n\t\t\t\t{\n\t\t\t\t\tname: 'action',\n\t\t\t\t\tvalue: 'block_loadmore',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'paged',\n\t\t\t\t\tvalue: paged,\n\t\t\t\t}\n\t\t\t);\n\t\t\tif ( typeof listings !== 'undefined' ) {\n\t\t\t\twpData.push( {\n\t\t\t\t\tname: 'listings_per_page',\n\t\t\t\t\tvalue: listings,\n\t\t\t\t} );\n\t\t\t}\n\t\t\tif ( typeof specs !== 'undefined' ) {\n\t\t\t\twpData.push( {\n\t\t\t\t\tname: 'shortcode_specs',\n\t\t\t\t\tvalue: specs,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t/* added for block */\n\t\t\tif ( typeof layout !== 'undefined' ) {\n\t\t\t\twpData.push( {\n\t\t\t\t\tname: 'awsm-layout',\n\t\t\t\t\tvalue: layout,\n\t\t\t\t} );\n\t\t\t}\n\t\t\tif ( typeof hide_expired_jobs !== 'undefined' ) {\n\t\t\t\twpData.push( {\n\t\t\t\t\tname: 'awsm-hide-expired-jobs',\n\t\t\t\t\tvalue: hide_expired_jobs,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( selected_terms ) {\n\t\t\t\tif ( typeof selected_terms === 'string' ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// Parse the JSON string into an object\n\t\t\t\t\t\tselected_terms = JSON.parse( selected_terms );\n\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t'Failed to parse selected_terms JSON:',\n\t\t\t\t\t\t\terror\n\t\t\t\t\t\t);\n\t\t\t\t\t\tselected_terms = {}; // Fallback to an empty object\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Push to wpData\n\t\t\t\twpData.push( {\n\t\t\t\t\tname: 'awsm-selected-terms',\n\t\t\t\t\tvalue: JSON.stringify( selected_terms ), // Send as JSON string\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( typeof other_options !== 'undefined' ) {\n\t\t\t\twpData.push( {\n\t\t\t\t\tname: 'awsm-other-options',\n\t\t\t\t\tvalue: other_options,\n\t\t\t\t} );\n\t\t\t}\n\t\t\tif ( typeof listings_total !== 'undefined' ) {\n\t\t\t\twpData.push( {\n\t\t\t\t\tname: 'awsm-listings-total',\n\t\t\t\t\tvalue: listings_total,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( typeof lang !== 'undefined' ) {\n\t\t\t\twpData.push( {\n\t\t\t\t\tname: 'lang',\n\t\t\t\t\tvalue: lang,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( typeof searchQuery !== 'undefined' ) {\n\t\t\t\twpData.push( {\n\t\t\t\t\tname: 'jq',\n\t\t\t\t\tvalue: searchQuery,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t$( document ).trigger( 'awsmjobs_block_load_more', [\n\t\t\t\t$listingsContainer,\n\t\t\t\twpData,\n\t\t\t] );\n\t\t\tconst listingsData = getListingsData( $listingsContainer );\n\t\t\tif ( listingsData.length > 0 ) {\n\t\t\t\twpData = wpData.concat( listingsData );\n\t\t\t}\n\n\t\t\t// now, handle ajax\n\t\t\t$.ajax( {\n\t\t\t\turl: awsmJobsPublic.ajaxurl,\n\t\t\t\tdata: $.param( wpData ),\n\t\t\t\ttype: 'POST',\n\t\t\t\tbeforeSend() {\n\t\t\t\t\tif ( isDefaultPagination ) {\n\t\t\t\t\t\t$triggerElem.text( awsmJobsPublic.i18n.loading_text );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$listingsContainer.addClass( 'awsm-jobs-loading' );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t} )\n\t\t\t\t.done( function ( data ) {\n\t\t\t\t\tif ( data ) {\n\t\t\t\t\t\tlet effectDuration =\n\t\t\t\t\t\t\t$paginationWrapper.data( 'effectDuration' );\n\t\t\t\t\t\t$paginationWrapper.remove();\n\t\t\t\t\t\tif ( isDefaultPagination ) {\n\t\t\t\t\t\t\t$listingsrowContainer.append( data );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$listingsrowContainer.html( data );\n\t\t\t\t\t\t\t$listingsContainer.removeClass(\n\t\t\t\t\t\t\t\t'awsm-jobs-loading'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif ( typeof effectDuration !== 'undefined' ) {\n\t\t\t\t\t\t\t\teffectDuration = isNaN( effectDuration )\n\t\t\t\t\t\t\t\t\t? effectDuration\n\t\t\t\t\t\t\t\t\t: Number( effectDuration );\n\t\t\t\t\t\t\t\t$( 'html, body' ).animate(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tscrollTop:\n\t\t\t\t\t\t\t\t\t\t\t$mainContainer.offset().top - 25,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\teffectDuration\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$triggerElem.remove();\n\t\t\t\t\t}\n\n\t\t\t\t\t$( document ).trigger( 'awsmjobs_load_more', [\n\t\t\t\t\t\t$triggerElem,\n\t\t\t\t\t\tdata,\n\t\t\t\t\t] );\n\t\t\t\t} )\n\t\t\t\t.fail( function ( xhr ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( xhr );\n\t\t\t\t} );\n\t\t}\n\t);\n\n\t/**\n\t * Handle the filters toggle button in the job listing.\n\t */\n\t$( document ).on( 'click', '.awsm-b-filter-toggle', function ( e ) {\n\t\te.preventDefault();\n\t\tconst $elem = $( this );\n\t\t$elem.toggleClass( 'awsm-on' );\n\t\tif ( $elem.hasClass( 'awsm-on' ) ) {\n\t\t\t$elem.attr( 'aria-pressed', 'true' );\n\t\t} else {\n\t\t\t$elem.attr( 'aria-pressed', 'false' );\n\t\t}\n\t\tconst $parent = $elem.parent();\n\t\t$parent.find( '.awsm-b-filter-items' ).slideToggle();\n\t} );\n\n\t/**\n\t * Handle the responsive styles for filters in the job listing when search is enabled.\n\t */\n\tfunction filtersResponsiveStylesHandler() {\n\t\tconst $filtersWrap = $( '.awsm-b-filter-wrap' ).not(\n\t\t\t'.awsm-b-no-search-filter-wrap'\n\t\t);\n\t\t$filtersWrap.each( function () {\n\t\t\tconst $wrapper = $( this );\n\t\t\tconst filterFirstTop = $wrapper\n\t\t\t\t.find( '.awsm-b-filter-item' )\n\t\t\t\t.first()\n\t\t\t\t.offset().top;\n\t\t\tconst filterLastTop = $wrapper\n\t\t\t\t.find( '.awsm-b-filter-item' )\n\t\t\t\t.last()\n\t\t\t\t.offset().top;\n\t\t\tif ( window.innerWidth < 768 ) {\n\t\t\t\t$wrapper.removeClass( 'awsm-b-full-width-search-filter-wrap' );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( filterLastTop > filterFirstTop ) {\n\t\t\t\t$wrapper.addClass( 'awsm-b-full-width-search-filter-wrap' );\n\t\t\t}\n\t\t} );\n\t}\n\n\tif (\n\t\t$( '.awsm-b-filter-wrap' ).not( '.awsm-b-no-search-filter-wrap' )\n\t\t\t.length > 0\n\t) {\n\t\tfiltersResponsiveStylesHandler();\n\t\t$( window ).on( 'resize', filtersResponsiveStylesHandler );\n\t}\n} );\n"],"names":["jQuery","$","rootWrapperSelector","wrapperSelector","sectionSelector","filterSelector","currentUrl","window","location","protocol","host","pathname","triggerFilter","getListingsData","$wrapper","data","parsedListingsAttrs","push","document","trigger","dataAttrs","each","dataAttr","value","inArray","name","awsmJobFilters","$rootWrapper","find","$rowWrapper","$filterForm","formData","length","serializeArray","formMethod","attr","toUpperCase","listings","specs","layout","hide_expired_jobs","selected_terms","other_options","listings_total","JSON","parse","error","console","stringify","listingsData","concat","actionUrl","awsmJobsPublic","ajaxurl","ajax","url","beforeSend","addClass","type","done","html","$searchControl","val","removeClass","fail","xhr","log","always","filterCheck","check","$filterOption","searchJobs","$elem","parents","searchQuery","setPaginationBase","deep_linking","search","$paginationBase","updateQuery","$currentWrapper","is_search","searchParams","URLSearchParams","hasFiltersInURL","toString","key","split","has","delete","set","modQueryString","history","replaceState","splittedURL","queryString","hide","slice","on","e","preventDefault","show","closest","currentSpec","isMultiple","prop","allOptions","firstOption","eq","selectedOptions","isAllSelected","allLiItems","firstLiItem","selectedLiItems","filter","isCheckboxFilter","slugs","map","get","Boolean","index","$checkboxes","$allCheckbox","slugString","join","spec","selectedFilters","taxonomy","termId","slug","which","$triggerElem","isDefaultPagination","hasClass","paged","wpData","$mainContainer","$listingsContainer","$listingsrowContainer","$paginationWrapper","totalPosts","lang","removeAttr","specsList","$checkbox","hasOwnProperty","forEach","paginationBaseURL","pagination","is_tax_archive","param","text","i18n","loading_text","effectDuration","remove","append","isNaN","Number","animate","scrollTop","offset","top","toggleClass","$parent","parent","slideToggle","filtersResponsiveStylesHandler","$filtersWrap","not","filterFirstTop","first","filterLastTop","last","innerWidth"],"sourceRoot":""}